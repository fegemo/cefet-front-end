{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/specificity/dist/specificity.js","scripts/classes/spec-tabajara.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"spec-tabajara.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.SPECIFICITY = {})));\n}(this, (function (exports) { 'use strict';\n\n\t// Calculate the specificity for a selector by dividing it into simple selectors and counting them\n\tvar calculate = function(input) {\n\t\tvar selectors,\n\t\t\tselector,\n\t\t\ti,\n\t\t\tlen,\n\t\t\tresults = [];\n\n\t\t// Separate input by commas\n\t\tselectors = input.split(',');\n\n\t\tfor (i = 0, len = selectors.length; i < len; i += 1) {\n\t\t\tselector = selectors[i];\n\t\t\tif (selector.length > 0) {\n\t\t\t\tresults.push(calculateSingle(selector));\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t};\n\n\t/**\n\t * Calculates the specificity of CSS selectors\n\t * http://www.w3.org/TR/css3-selectors/#specificity\n\t *\n\t * Returns an object with the following properties:\n\t *  - selector: the input\n\t *  - specificity: e.g. 0,1,0,0\n\t *  - parts: array with details about each part of the selector that counts towards the specificity\n\t *  - specificityArray: e.g. [0, 1, 0, 0]\n\t */\n\tvar calculateSingle = function(input) {\n\t\tvar selector = input,\n\t\t\tfindMatch,\n\t\t\ttypeCount = {\n\t\t\t\t'a': 0,\n\t\t\t\t'b': 0,\n\t\t\t\t'c': 0\n\t\t\t},\n\t\t\tparts = [],\n\t\t\t// The following regular expressions assume that selectors matching the preceding regular expressions have been removed\n\t\t\tattributeRegex = /(\\[[^\\]]+\\])/g,\n\t\t\tidRegex = /(#[^\\#\\s\\+>~\\.\\[:\\)]+)/g,\n\t\t\tclassRegex = /(\\.[^\\s\\+>~\\.\\[:\\)]+)/g,\n\t\t\tpseudoElementRegex = /(::[^\\s\\+>~\\.\\[:]+|:first-line|:first-letter|:before|:after)/gi,\n\t\t\t// A regex for pseudo classes with brackets - :nth-child(), :nth-last-child(), :nth-of-type(), :nth-last-type(), :lang()\n\t\t\t// The negation psuedo class (:not) is filtered out because specificity is calculated on its argument\n\t\t\t// :global and :local are filtered out - they look like psuedo classes but are an identifier for CSS Modules\n\t\t\tpseudoClassWithBracketsRegex = /(:(?!not|global|local)[\\w-]+\\([^\\)]*\\))/gi,\n\t\t\t// A regex for other pseudo classes, which don't have brackets\n\t\t\tpseudoClassRegex = /(:(?!not|global|local)[^\\s\\+>~\\.\\[:]+)/g,\n\t\t\telementRegex = /([^\\s\\+>~\\.\\[:]+)/g;\n\n\t\t// Find matches for a regular expression in a string and push their details to parts\n\t\t// Type is \"a\" for IDs, \"b\" for classes, attributes and pseudo-classes and \"c\" for elements and pseudo-elements\n\t\tfindMatch = function(regex, type) {\n\t\t\tvar matches, i, len, match, index, length;\n\t\t\tif (regex.test(selector)) {\n\t\t\t\tmatches = selector.match(regex);\n\t\t\t\tfor (i = 0, len = matches.length; i < len; i += 1) {\n\t\t\t\t\ttypeCount[type] += 1;\n\t\t\t\t\tmatch = matches[i];\n\t\t\t\t\tindex = selector.indexOf(match);\n\t\t\t\t\tlength = match.length;\n\t\t\t\t\tparts.push({\n\t\t\t\t\t\tselector: input.substr(index, length),\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tlength: length\n\t\t\t\t\t});\n\t\t\t\t\t// Replace this simple selector with whitespace so it won't be counted in further simple selectors\n\t\t\t\t\tselector = selector.replace(match, Array(length + 1).join(' '));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Replace escaped characters with plain text, using the \"A\" character\n\t\t// https://www.w3.org/TR/CSS21/syndata.html#characters\n\t\t(function() {\n\t\t\tvar replaceWithPlainText = function(regex) {\n\t\t\t\t\tvar matches, i, len, match;\n\t\t\t\t\tif (regex.test(selector)) {\n\t\t\t\t\t\tmatches = selector.match(regex);\n\t\t\t\t\t\tfor (i = 0, len = matches.length; i < len; i += 1) {\n\t\t\t\t\t\t\tmatch = matches[i];\n\t\t\t\t\t\t\tselector = selector.replace(match, Array(match.length + 1).join('A'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// Matches a backslash followed by six hexadecimal digits followed by an optional single whitespace character\n\t\t\t\tescapeHexadecimalRegex = /\\\\[0-9A-Fa-f]{6}\\s?/g,\n\t\t\t\t// Matches a backslash followed by fewer than six hexadecimal digits followed by a mandatory single whitespace character\n\t\t\t\tescapeHexadecimalRegex2 = /\\\\[0-9A-Fa-f]{1,5}\\s/g,\n\t\t\t\t// Matches a backslash followed by any character\n\t\t\t\tescapeSpecialCharacter = /\\\\./g;\n\n\t\t\treplaceWithPlainText(escapeHexadecimalRegex);\n\t\t\treplaceWithPlainText(escapeHexadecimalRegex2);\n\t\t\treplaceWithPlainText(escapeSpecialCharacter);\n\t\t}());\n\n\t\t// Remove anything after a left brace in case a user has pasted in a rule, not just a selector\n\t\t(function() {\n\t\t\tvar regex = /{[^]*/gm,\n\t\t\t\tmatches, i, len, match;\n\t\t\tif (regex.test(selector)) {\n\t\t\t\tmatches = selector.match(regex);\n\t\t\t\tfor (i = 0, len = matches.length; i < len; i += 1) {\n\t\t\t\t\tmatch = matches[i];\n\t\t\t\t\tselector = selector.replace(match, Array(match.length + 1).join(' '));\n\t\t\t\t}\n\t\t\t}\n\t\t}());\n\n\t\t// Add attribute selectors to parts collection (type b)\n\t\tfindMatch(attributeRegex, 'b');\n\n\t\t// Add ID selectors to parts collection (type a)\n\t\tfindMatch(idRegex, 'a');\n\n\t\t// Add class selectors to parts collection (type b)\n\t\tfindMatch(classRegex, 'b');\n\n\t\t// Add pseudo-element selectors to parts collection (type c)\n\t\tfindMatch(pseudoElementRegex, 'c');\n\n\t\t// Add pseudo-class selectors to parts collection (type b)\n\t\tfindMatch(pseudoClassWithBracketsRegex, 'b');\n\t\tfindMatch(pseudoClassRegex, 'b');\n\n\t\t// Remove universal selector and separator characters\n\t\tselector = selector.replace(/[\\*\\s\\+>~]/g, ' ');\n\n\t\t// Remove any stray dots or hashes which aren't attached to words\n\t\t// These may be present if the user is live-editing this selector\n\t\tselector = selector.replace(/[#\\.]/g, ' ');\n\n\t\t// Remove the negation psuedo-class (:not) but leave its argument because specificity is calculated on its argument\n\t \t// Remove non-standard :local and :global CSS Module identifiers because they do not effect the specificity\n\t\tselector = selector.replace(/:not/g, '    ');\n\t\tselector = selector.replace(/:local/g, '      ');\n\t\tselector = selector.replace(/:global/g, '       ');\n\t\tselector = selector.replace(/[\\(\\)]/g, ' ');\n\n\t\t// The only things left should be element selectors (type c)\n\t\tfindMatch(elementRegex, 'c');\n\n\t\t// Order the parts in the order they appear in the original selector\n\t\t// This is neater for external apps to deal with\n\t\tparts.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\n\t\treturn {\n\t\t\tselector: input,\n\t\t\tspecificity: '0,' + typeCount.a.toString() + ',' + typeCount.b.toString() + ',' + typeCount.c.toString(),\n\t\t\tspecificityArray: [0, typeCount.a, typeCount.b, typeCount.c],\n\t\t\tparts: parts\n\t\t};\n\t};\n\n\t/**\n\t * Compares two CSS selectors for specificity\n\t * Alternatively you can replace one of the CSS selectors with a specificity array\n\t *\n\t *  - it returns -1 if a has a lower specificity than b\n\t *  - it returns 1 if a has a higher specificity than b\n\t *  - it returns 0 if a has the same specificity than b\n\t */\n\tvar compare = function(a, b) {\n\t\tvar aSpecificity,\n\t\t\tbSpecificity,\n\t\t\ti;\n\n\t\tif (typeof a ==='string') {\n\t\t\tif (a.indexOf(',') !== -1) {\n\t\t\t\tthrow 'Invalid CSS selector';\n\t\t\t} else {\n\t\t\t\taSpecificity = calculateSingle(a)['specificityArray'];\n\t\t\t}\n\t\t} else if (Array.isArray(a)) {\n\t\t\tif (a.filter(function(e) { return (typeof e === 'number'); }).length !== 4) {\n\t\t\t\tthrow 'Invalid specificity array';\n\t\t\t} else {\n\t\t\t\taSpecificity = a;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow 'Invalid CSS selector or specificity array';\n\t\t}\n\n\t\tif (typeof b ==='string') {\n\t\t\tif (b.indexOf(',') !== -1) {\n\t\t\t\tthrow 'Invalid CSS selector';\n\t\t\t} else {\n\t\t\t\tbSpecificity = calculateSingle(b)['specificityArray'];\n\t\t\t}\n\t\t} else if (Array.isArray(b)) {\n\t\t\tif (b.filter(function(e) { return (typeof e === 'number'); }).length !== 4) {\n\t\t\t\tthrow 'Invalid specificity array';\n\t\t\t} else {\n\t\t\t\tbSpecificity = b;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow 'Invalid CSS selector or specificity array';\n\t\t}\n\n\t\tfor (i = 0; i < 4; i += 1) {\n\t\t\tif (aSpecificity[i] < bSpecificity[i]) {\n\t\t\t\treturn -1;\n\t\t\t} else if (aSpecificity[i] > bSpecificity[i]) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\texports.calculate = calculate;\n\texports.compare = compare;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","let spec = require('specificity'),\r\n\r\n  SpecificatorTabajara = function(inputEl, outputAEl, outputBEl,\r\n    outputCEl, buttonEl) {\r\n    this.inputEl = inputEl\r\n    this.outputAEl = outputAEl\r\n    this.outputBEl = outputBEl\r\n    this.outputCEl = outputCEl\r\n    this.buttonEl = buttonEl\r\n  }\r\n\r\n// attaches the event handlers\r\nSpecificatorTabajara.prototype.start = function() {\r\n  let specificator = this\r\n  this.buttonEl.onclick = function() {\r\n    specificator.calculate()\r\n  }\r\n}\r\n\r\nSpecificatorTabajara.prototype.calculate = function() {\r\n  // gets the value from the input\r\n  const input = this.inputEl.value\r\n  let result = spec.calculate(input)[0]\r\n\r\n  if (result && result.specificity) {\r\n    result = result.specificity.split(',')\r\n  } else {\r\n    result = [0, 0, 0, 0]\r\n  }\r\n\r\n  // sets the value of the 3 outputs\r\n  this.outputAEl.innerHTML = `${result[1]}`\r\n  this.outputBEl.innerHTML = `${result[2]}`\r\n  this.outputCEl.innerHTML = `${result[3]}`\r\n}\r\n\r\n\r\nlet options = {\r\n    input: 'spec-tabajara-input',\r\n    output: [\r\n      'spec-tabajara-output-a',\r\n      'spec-tabajara-output-b',\r\n      'spec-tabajara-output-c'],\r\n    button: 'spec-tabajara-button'\r\n  },\r\n  inputEl = document.getElementById(options.input)\r\n\r\nif (inputEl) {\r\n  new SpecificatorTabajara(\r\n    inputEl,\r\n    document.getElementById(options.output[0]),\r\n    document.getElementById(options.output[1]),\r\n    document.getElementById(options.output[2]),\r\n    document.getElementById(options.button)\r\n  ).start()\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvc3BlY2lmaWNpdHkvZGlzdC9zcGVjaWZpY2l0eS5qcyIsInNjcmlwdHMvY2xhc3Nlcy9zcGVjLXRhYmFqYXJhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuXHQoZmFjdG9yeSgoZ2xvYmFsLlNQRUNJRklDSVRZID0ge30pKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cblx0Ly8gQ2FsY3VsYXRlIHRoZSBzcGVjaWZpY2l0eSBmb3IgYSBzZWxlY3RvciBieSBkaXZpZGluZyBpdCBpbnRvIHNpbXBsZSBzZWxlY3RvcnMgYW5kIGNvdW50aW5nIHRoZW1cblx0dmFyIGNhbGN1bGF0ZSA9IGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0dmFyIHNlbGVjdG9ycyxcblx0XHRcdHNlbGVjdG9yLFxuXHRcdFx0aSxcblx0XHRcdGxlbixcblx0XHRcdHJlc3VsdHMgPSBbXTtcblxuXHRcdC8vIFNlcGFyYXRlIGlucHV0IGJ5IGNvbW1hc1xuXHRcdHNlbGVjdG9ycyA9IGlucHV0LnNwbGl0KCcsJyk7XG5cblx0XHRmb3IgKGkgPSAwLCBsZW4gPSBzZWxlY3RvcnMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3JzW2ldO1xuXHRcdFx0aWYgKHNlbGVjdG9yLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0cmVzdWx0cy5wdXNoKGNhbGN1bGF0ZVNpbmdsZShzZWxlY3RvcikpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDYWxjdWxhdGVzIHRoZSBzcGVjaWZpY2l0eSBvZiBDU1Mgc2VsZWN0b3JzXG5cdCAqIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyNzcGVjaWZpY2l0eVxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcblx0ICogIC0gc2VsZWN0b3I6IHRoZSBpbnB1dFxuXHQgKiAgLSBzcGVjaWZpY2l0eTogZS5nLiAwLDEsMCwwXG5cdCAqICAtIHBhcnRzOiBhcnJheSB3aXRoIGRldGFpbHMgYWJvdXQgZWFjaCBwYXJ0IG9mIHRoZSBzZWxlY3RvciB0aGF0IGNvdW50cyB0b3dhcmRzIHRoZSBzcGVjaWZpY2l0eVxuXHQgKiAgLSBzcGVjaWZpY2l0eUFycmF5OiBlLmcuIFswLCAxLCAwLCAwXVxuXHQgKi9cblx0dmFyIGNhbGN1bGF0ZVNpbmdsZSA9IGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0dmFyIHNlbGVjdG9yID0gaW5wdXQsXG5cdFx0XHRmaW5kTWF0Y2gsXG5cdFx0XHR0eXBlQ291bnQgPSB7XG5cdFx0XHRcdCdhJzogMCxcblx0XHRcdFx0J2InOiAwLFxuXHRcdFx0XHQnYyc6IDBcblx0XHRcdH0sXG5cdFx0XHRwYXJ0cyA9IFtdLFxuXHRcdFx0Ly8gVGhlIGZvbGxvd2luZyByZWd1bGFyIGV4cHJlc3Npb25zIGFzc3VtZSB0aGF0IHNlbGVjdG9ycyBtYXRjaGluZyB0aGUgcHJlY2VkaW5nIHJlZ3VsYXIgZXhwcmVzc2lvbnMgaGF2ZSBiZWVuIHJlbW92ZWRcblx0XHRcdGF0dHJpYnV0ZVJlZ2V4ID0gLyhcXFtbXlxcXV0rXFxdKS9nLFxuXHRcdFx0aWRSZWdleCA9IC8oI1teXFwjXFxzXFwrPn5cXC5cXFs6XFwpXSspL2csXG5cdFx0XHRjbGFzc1JlZ2V4ID0gLyhcXC5bXlxcc1xcKz5+XFwuXFxbOlxcKV0rKS9nLFxuXHRcdFx0cHNldWRvRWxlbWVudFJlZ2V4ID0gLyg6OlteXFxzXFwrPn5cXC5cXFs6XSt8OmZpcnN0LWxpbmV8OmZpcnN0LWxldHRlcnw6YmVmb3JlfDphZnRlcikvZ2ksXG5cdFx0XHQvLyBBIHJlZ2V4IGZvciBwc2V1ZG8gY2xhc3NlcyB3aXRoIGJyYWNrZXRzIC0gOm50aC1jaGlsZCgpLCA6bnRoLWxhc3QtY2hpbGQoKSwgOm50aC1vZi10eXBlKCksIDpudGgtbGFzdC10eXBlKCksIDpsYW5nKClcblx0XHRcdC8vIFRoZSBuZWdhdGlvbiBwc3VlZG8gY2xhc3MgKDpub3QpIGlzIGZpbHRlcmVkIG91dCBiZWNhdXNlIHNwZWNpZmljaXR5IGlzIGNhbGN1bGF0ZWQgb24gaXRzIGFyZ3VtZW50XG5cdFx0XHQvLyA6Z2xvYmFsIGFuZCA6bG9jYWwgYXJlIGZpbHRlcmVkIG91dCAtIHRoZXkgbG9vayBsaWtlIHBzdWVkbyBjbGFzc2VzIGJ1dCBhcmUgYW4gaWRlbnRpZmllciBmb3IgQ1NTIE1vZHVsZXNcblx0XHRcdHBzZXVkb0NsYXNzV2l0aEJyYWNrZXRzUmVnZXggPSAvKDooPyFub3R8Z2xvYmFsfGxvY2FsKVtcXHctXStcXChbXlxcKV0qXFwpKS9naSxcblx0XHRcdC8vIEEgcmVnZXggZm9yIG90aGVyIHBzZXVkbyBjbGFzc2VzLCB3aGljaCBkb24ndCBoYXZlIGJyYWNrZXRzXG5cdFx0XHRwc2V1ZG9DbGFzc1JlZ2V4ID0gLyg6KD8hbm90fGdsb2JhbHxsb2NhbClbXlxcc1xcKz5+XFwuXFxbOl0rKS9nLFxuXHRcdFx0ZWxlbWVudFJlZ2V4ID0gLyhbXlxcc1xcKz5+XFwuXFxbOl0rKS9nO1xuXG5cdFx0Ly8gRmluZCBtYXRjaGVzIGZvciBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBpbiBhIHN0cmluZyBhbmQgcHVzaCB0aGVpciBkZXRhaWxzIHRvIHBhcnRzXG5cdFx0Ly8gVHlwZSBpcyBcImFcIiBmb3IgSURzLCBcImJcIiBmb3IgY2xhc3NlcywgYXR0cmlidXRlcyBhbmQgcHNldWRvLWNsYXNzZXMgYW5kIFwiY1wiIGZvciBlbGVtZW50cyBhbmQgcHNldWRvLWVsZW1lbnRzXG5cdFx0ZmluZE1hdGNoID0gZnVuY3Rpb24ocmVnZXgsIHR5cGUpIHtcblx0XHRcdHZhciBtYXRjaGVzLCBpLCBsZW4sIG1hdGNoLCBpbmRleCwgbGVuZ3RoO1xuXHRcdFx0aWYgKHJlZ2V4LnRlc3Qoc2VsZWN0b3IpKSB7XG5cdFx0XHRcdG1hdGNoZXMgPSBzZWxlY3Rvci5tYXRjaChyZWdleCk7XG5cdFx0XHRcdGZvciAoaSA9IDAsIGxlbiA9IG1hdGNoZXMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcblx0XHRcdFx0XHR0eXBlQ291bnRbdHlwZV0gKz0gMTtcblx0XHRcdFx0XHRtYXRjaCA9IG1hdGNoZXNbaV07XG5cdFx0XHRcdFx0aW5kZXggPSBzZWxlY3Rvci5pbmRleE9mKG1hdGNoKTtcblx0XHRcdFx0XHRsZW5ndGggPSBtYXRjaC5sZW5ndGg7XG5cdFx0XHRcdFx0cGFydHMucHVzaCh7XG5cdFx0XHRcdFx0XHRzZWxlY3RvcjogaW5wdXQuc3Vic3RyKGluZGV4LCBsZW5ndGgpLFxuXHRcdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRcdGluZGV4OiBpbmRleCxcblx0XHRcdFx0XHRcdGxlbmd0aDogbGVuZ3RoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gUmVwbGFjZSB0aGlzIHNpbXBsZSBzZWxlY3RvciB3aXRoIHdoaXRlc3BhY2Ugc28gaXQgd29uJ3QgYmUgY291bnRlZCBpbiBmdXJ0aGVyIHNpbXBsZSBzZWxlY3RvcnNcblx0XHRcdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UobWF0Y2gsIEFycmF5KGxlbmd0aCArIDEpLmpvaW4oJyAnKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gUmVwbGFjZSBlc2NhcGVkIGNoYXJhY3RlcnMgd2l0aCBwbGFpbiB0ZXh0LCB1c2luZyB0aGUgXCJBXCIgY2hhcmFjdGVyXG5cdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNjaGFyYWN0ZXJzXG5cdFx0KGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJlcGxhY2VXaXRoUGxhaW5UZXh0ID0gZnVuY3Rpb24ocmVnZXgpIHtcblx0XHRcdFx0XHR2YXIgbWF0Y2hlcywgaSwgbGVuLCBtYXRjaDtcblx0XHRcdFx0XHRpZiAocmVnZXgudGVzdChzZWxlY3RvcikpIHtcblx0XHRcdFx0XHRcdG1hdGNoZXMgPSBzZWxlY3Rvci5tYXRjaChyZWdleCk7XG5cdFx0XHRcdFx0XHRmb3IgKGkgPSAwLCBsZW4gPSBtYXRjaGVzLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoID0gbWF0Y2hlc1tpXTtcblx0XHRcdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKG1hdGNoLCBBcnJheShtYXRjaC5sZW5ndGggKyAxKS5qb2luKCdBJykpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0Ly8gTWF0Y2hlcyBhIGJhY2tzbGFzaCBmb2xsb3dlZCBieSBzaXggaGV4YWRlY2ltYWwgZGlnaXRzIGZvbGxvd2VkIGJ5IGFuIG9wdGlvbmFsIHNpbmdsZSB3aGl0ZXNwYWNlIGNoYXJhY3RlclxuXHRcdFx0XHRlc2NhcGVIZXhhZGVjaW1hbFJlZ2V4ID0gL1xcXFxbMC05QS1GYS1mXXs2fVxccz8vZyxcblx0XHRcdFx0Ly8gTWF0Y2hlcyBhIGJhY2tzbGFzaCBmb2xsb3dlZCBieSBmZXdlciB0aGFuIHNpeCBoZXhhZGVjaW1hbCBkaWdpdHMgZm9sbG93ZWQgYnkgYSBtYW5kYXRvcnkgc2luZ2xlIHdoaXRlc3BhY2UgY2hhcmFjdGVyXG5cdFx0XHRcdGVzY2FwZUhleGFkZWNpbWFsUmVnZXgyID0gL1xcXFxbMC05QS1GYS1mXXsxLDV9XFxzL2csXG5cdFx0XHRcdC8vIE1hdGNoZXMgYSBiYWNrc2xhc2ggZm9sbG93ZWQgYnkgYW55IGNoYXJhY3RlclxuXHRcdFx0XHRlc2NhcGVTcGVjaWFsQ2hhcmFjdGVyID0gL1xcXFwuL2c7XG5cblx0XHRcdHJlcGxhY2VXaXRoUGxhaW5UZXh0KGVzY2FwZUhleGFkZWNpbWFsUmVnZXgpO1xuXHRcdFx0cmVwbGFjZVdpdGhQbGFpblRleHQoZXNjYXBlSGV4YWRlY2ltYWxSZWdleDIpO1xuXHRcdFx0cmVwbGFjZVdpdGhQbGFpblRleHQoZXNjYXBlU3BlY2lhbENoYXJhY3Rlcik7XG5cdFx0fSgpKTtcblxuXHRcdC8vIFJlbW92ZSBhbnl0aGluZyBhZnRlciBhIGxlZnQgYnJhY2UgaW4gY2FzZSBhIHVzZXIgaGFzIHBhc3RlZCBpbiBhIHJ1bGUsIG5vdCBqdXN0IGEgc2VsZWN0b3Jcblx0XHQoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcmVnZXggPSAve1teXSovZ20sXG5cdFx0XHRcdG1hdGNoZXMsIGksIGxlbiwgbWF0Y2g7XG5cdFx0XHRpZiAocmVnZXgudGVzdChzZWxlY3RvcikpIHtcblx0XHRcdFx0bWF0Y2hlcyA9IHNlbGVjdG9yLm1hdGNoKHJlZ2V4KTtcblx0XHRcdFx0Zm9yIChpID0gMCwgbGVuID0gbWF0Y2hlcy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuXHRcdFx0XHRcdG1hdGNoID0gbWF0Y2hlc1tpXTtcblx0XHRcdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UobWF0Y2gsIEFycmF5KG1hdGNoLmxlbmd0aCArIDEpLmpvaW4oJyAnKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KCkpO1xuXG5cdFx0Ly8gQWRkIGF0dHJpYnV0ZSBzZWxlY3RvcnMgdG8gcGFydHMgY29sbGVjdGlvbiAodHlwZSBiKVxuXHRcdGZpbmRNYXRjaChhdHRyaWJ1dGVSZWdleCwgJ2InKTtcblxuXHRcdC8vIEFkZCBJRCBzZWxlY3RvcnMgdG8gcGFydHMgY29sbGVjdGlvbiAodHlwZSBhKVxuXHRcdGZpbmRNYXRjaChpZFJlZ2V4LCAnYScpO1xuXG5cdFx0Ly8gQWRkIGNsYXNzIHNlbGVjdG9ycyB0byBwYXJ0cyBjb2xsZWN0aW9uICh0eXBlIGIpXG5cdFx0ZmluZE1hdGNoKGNsYXNzUmVnZXgsICdiJyk7XG5cblx0XHQvLyBBZGQgcHNldWRvLWVsZW1lbnQgc2VsZWN0b3JzIHRvIHBhcnRzIGNvbGxlY3Rpb24gKHR5cGUgYylcblx0XHRmaW5kTWF0Y2gocHNldWRvRWxlbWVudFJlZ2V4LCAnYycpO1xuXG5cdFx0Ly8gQWRkIHBzZXVkby1jbGFzcyBzZWxlY3RvcnMgdG8gcGFydHMgY29sbGVjdGlvbiAodHlwZSBiKVxuXHRcdGZpbmRNYXRjaChwc2V1ZG9DbGFzc1dpdGhCcmFja2V0c1JlZ2V4LCAnYicpO1xuXHRcdGZpbmRNYXRjaChwc2V1ZG9DbGFzc1JlZ2V4LCAnYicpO1xuXG5cdFx0Ly8gUmVtb3ZlIHVuaXZlcnNhbCBzZWxlY3RvciBhbmQgc2VwYXJhdG9yIGNoYXJhY3RlcnNcblx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoL1tcXCpcXHNcXCs+fl0vZywgJyAnKTtcblxuXHRcdC8vIFJlbW92ZSBhbnkgc3RyYXkgZG90cyBvciBoYXNoZXMgd2hpY2ggYXJlbid0IGF0dGFjaGVkIHRvIHdvcmRzXG5cdFx0Ly8gVGhlc2UgbWF5IGJlIHByZXNlbnQgaWYgdGhlIHVzZXIgaXMgbGl2ZS1lZGl0aW5nIHRoaXMgc2VsZWN0b3Jcblx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoL1sjXFwuXS9nLCAnICcpO1xuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBuZWdhdGlvbiBwc3VlZG8tY2xhc3MgKDpub3QpIGJ1dCBsZWF2ZSBpdHMgYXJndW1lbnQgYmVjYXVzZSBzcGVjaWZpY2l0eSBpcyBjYWxjdWxhdGVkIG9uIGl0cyBhcmd1bWVudFxuXHQgXHQvLyBSZW1vdmUgbm9uLXN0YW5kYXJkIDpsb2NhbCBhbmQgOmdsb2JhbCBDU1MgTW9kdWxlIGlkZW50aWZpZXJzIGJlY2F1c2UgdGhleSBkbyBub3QgZWZmZWN0IHRoZSBzcGVjaWZpY2l0eVxuXHRcdHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgvOm5vdC9nLCAnICAgICcpO1xuXHRcdHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgvOmxvY2FsL2csICcgICAgICAnKTtcblx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoLzpnbG9iYWwvZywgJyAgICAgICAnKTtcblx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoL1tcXChcXCldL2csICcgJyk7XG5cblx0XHQvLyBUaGUgb25seSB0aGluZ3MgbGVmdCBzaG91bGQgYmUgZWxlbWVudCBzZWxlY3RvcnMgKHR5cGUgYylcblx0XHRmaW5kTWF0Y2goZWxlbWVudFJlZ2V4LCAnYycpO1xuXG5cdFx0Ly8gT3JkZXIgdGhlIHBhcnRzIGluIHRoZSBvcmRlciB0aGV5IGFwcGVhciBpbiB0aGUgb3JpZ2luYWwgc2VsZWN0b3Jcblx0XHQvLyBUaGlzIGlzIG5lYXRlciBmb3IgZXh0ZXJuYWwgYXBwcyB0byBkZWFsIHdpdGhcblx0XHRwYXJ0cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcblx0XHR9KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRzZWxlY3RvcjogaW5wdXQsXG5cdFx0XHRzcGVjaWZpY2l0eTogJzAsJyArIHR5cGVDb3VudC5hLnRvU3RyaW5nKCkgKyAnLCcgKyB0eXBlQ291bnQuYi50b1N0cmluZygpICsgJywnICsgdHlwZUNvdW50LmMudG9TdHJpbmcoKSxcblx0XHRcdHNwZWNpZmljaXR5QXJyYXk6IFswLCB0eXBlQ291bnQuYSwgdHlwZUNvdW50LmIsIHR5cGVDb3VudC5jXSxcblx0XHRcdHBhcnRzOiBwYXJ0c1xuXHRcdH07XG5cdH07XG5cblx0LyoqXG5cdCAqIENvbXBhcmVzIHR3byBDU1Mgc2VsZWN0b3JzIGZvciBzcGVjaWZpY2l0eVxuXHQgKiBBbHRlcm5hdGl2ZWx5IHlvdSBjYW4gcmVwbGFjZSBvbmUgb2YgdGhlIENTUyBzZWxlY3RvcnMgd2l0aCBhIHNwZWNpZmljaXR5IGFycmF5XG5cdCAqXG5cdCAqICAtIGl0IHJldHVybnMgLTEgaWYgYSBoYXMgYSBsb3dlciBzcGVjaWZpY2l0eSB0aGFuIGJcblx0ICogIC0gaXQgcmV0dXJucyAxIGlmIGEgaGFzIGEgaGlnaGVyIHNwZWNpZmljaXR5IHRoYW4gYlxuXHQgKiAgLSBpdCByZXR1cm5zIDAgaWYgYSBoYXMgdGhlIHNhbWUgc3BlY2lmaWNpdHkgdGhhbiBiXG5cdCAqL1xuXHR2YXIgY29tcGFyZSA9IGZ1bmN0aW9uKGEsIGIpIHtcblx0XHR2YXIgYVNwZWNpZmljaXR5LFxuXHRcdFx0YlNwZWNpZmljaXR5LFxuXHRcdFx0aTtcblxuXHRcdGlmICh0eXBlb2YgYSA9PT0nc3RyaW5nJykge1xuXHRcdFx0aWYgKGEuaW5kZXhPZignLCcpICE9PSAtMSkge1xuXHRcdFx0XHR0aHJvdyAnSW52YWxpZCBDU1Mgc2VsZWN0b3InO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YVNwZWNpZmljaXR5ID0gY2FsY3VsYXRlU2luZ2xlKGEpWydzcGVjaWZpY2l0eUFycmF5J107XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpKSB7XG5cdFx0XHRpZiAoYS5maWx0ZXIoZnVuY3Rpb24oZSkgeyByZXR1cm4gKHR5cGVvZiBlID09PSAnbnVtYmVyJyk7IH0pLmxlbmd0aCAhPT0gNCkge1xuXHRcdFx0XHR0aHJvdyAnSW52YWxpZCBzcGVjaWZpY2l0eSBhcnJheSc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhU3BlY2lmaWNpdHkgPSBhO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyAnSW52YWxpZCBDU1Mgc2VsZWN0b3Igb3Igc3BlY2lmaWNpdHkgYXJyYXknO1xuXHRcdH1cblxuXHRcdGlmICh0eXBlb2YgYiA9PT0nc3RyaW5nJykge1xuXHRcdFx0aWYgKGIuaW5kZXhPZignLCcpICE9PSAtMSkge1xuXHRcdFx0XHR0aHJvdyAnSW52YWxpZCBDU1Mgc2VsZWN0b3InO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YlNwZWNpZmljaXR5ID0gY2FsY3VsYXRlU2luZ2xlKGIpWydzcGVjaWZpY2l0eUFycmF5J107XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGIpKSB7XG5cdFx0XHRpZiAoYi5maWx0ZXIoZnVuY3Rpb24oZSkgeyByZXR1cm4gKHR5cGVvZiBlID09PSAnbnVtYmVyJyk7IH0pLmxlbmd0aCAhPT0gNCkge1xuXHRcdFx0XHR0aHJvdyAnSW52YWxpZCBzcGVjaWZpY2l0eSBhcnJheSc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRiU3BlY2lmaWNpdHkgPSBiO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyAnSW52YWxpZCBDU1Mgc2VsZWN0b3Igb3Igc3BlY2lmaWNpdHkgYXJyYXknO1xuXHRcdH1cblxuXHRcdGZvciAoaSA9IDA7IGkgPCA0OyBpICs9IDEpIHtcblx0XHRcdGlmIChhU3BlY2lmaWNpdHlbaV0gPCBiU3BlY2lmaWNpdHlbaV0pIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fSBlbHNlIGlmIChhU3BlY2lmaWNpdHlbaV0gPiBiU3BlY2lmaWNpdHlbaV0pIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIDA7XG5cdH07XG5cblx0ZXhwb3J0cy5jYWxjdWxhdGUgPSBjYWxjdWxhdGU7XG5cdGV4cG9ydHMuY29tcGFyZSA9IGNvbXBhcmU7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbiIsImxldCBzcGVjID0gcmVxdWlyZSgnc3BlY2lmaWNpdHknKSxcclxuXHJcbiAgU3BlY2lmaWNhdG9yVGFiYWphcmEgPSBmdW5jdGlvbihpbnB1dEVsLCBvdXRwdXRBRWwsIG91dHB1dEJFbCxcclxuICAgIG91dHB1dENFbCwgYnV0dG9uRWwpIHtcclxuICAgIHRoaXMuaW5wdXRFbCA9IGlucHV0RWxcclxuICAgIHRoaXMub3V0cHV0QUVsID0gb3V0cHV0QUVsXHJcbiAgICB0aGlzLm91dHB1dEJFbCA9IG91dHB1dEJFbFxyXG4gICAgdGhpcy5vdXRwdXRDRWwgPSBvdXRwdXRDRWxcclxuICAgIHRoaXMuYnV0dG9uRWwgPSBidXR0b25FbFxyXG4gIH1cclxuXHJcbi8vIGF0dGFjaGVzIHRoZSBldmVudCBoYW5kbGVyc1xyXG5TcGVjaWZpY2F0b3JUYWJhamFyYS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcclxuICBsZXQgc3BlY2lmaWNhdG9yID0gdGhpc1xyXG4gIHRoaXMuYnV0dG9uRWwub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc3BlY2lmaWNhdG9yLmNhbGN1bGF0ZSgpXHJcbiAgfVxyXG59XHJcblxyXG5TcGVjaWZpY2F0b3JUYWJhamFyYS5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gZ2V0cyB0aGUgdmFsdWUgZnJvbSB0aGUgaW5wdXRcclxuICBjb25zdCBpbnB1dCA9IHRoaXMuaW5wdXRFbC52YWx1ZVxyXG4gIGxldCByZXN1bHQgPSBzcGVjLmNhbGN1bGF0ZShpbnB1dClbMF1cclxuXHJcbiAgaWYgKHJlc3VsdCAmJiByZXN1bHQuc3BlY2lmaWNpdHkpIHtcclxuICAgIHJlc3VsdCA9IHJlc3VsdC5zcGVjaWZpY2l0eS5zcGxpdCgnLCcpXHJcbiAgfSBlbHNlIHtcclxuICAgIHJlc3VsdCA9IFswLCAwLCAwLCAwXVxyXG4gIH1cclxuXHJcbiAgLy8gc2V0cyB0aGUgdmFsdWUgb2YgdGhlIDMgb3V0cHV0c1xyXG4gIHRoaXMub3V0cHV0QUVsLmlubmVySFRNTCA9IGAke3Jlc3VsdFsxXX1gXHJcbiAgdGhpcy5vdXRwdXRCRWwuaW5uZXJIVE1MID0gYCR7cmVzdWx0WzJdfWBcclxuICB0aGlzLm91dHB1dENFbC5pbm5lckhUTUwgPSBgJHtyZXN1bHRbM119YFxyXG59XHJcblxyXG5cclxubGV0IG9wdGlvbnMgPSB7XHJcbiAgICBpbnB1dDogJ3NwZWMtdGFiYWphcmEtaW5wdXQnLFxyXG4gICAgb3V0cHV0OiBbXHJcbiAgICAgICdzcGVjLXRhYmFqYXJhLW91dHB1dC1hJyxcclxuICAgICAgJ3NwZWMtdGFiYWphcmEtb3V0cHV0LWInLFxyXG4gICAgICAnc3BlYy10YWJhamFyYS1vdXRwdXQtYyddLFxyXG4gICAgYnV0dG9uOiAnc3BlYy10YWJhamFyYS1idXR0b24nXHJcbiAgfSxcclxuICBpbnB1dEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5pbnB1dClcclxuXHJcbmlmIChpbnB1dEVsKSB7XHJcbiAgbmV3IFNwZWNpZmljYXRvclRhYmFqYXJhKFxyXG4gICAgaW5wdXRFbCxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMub3V0cHV0WzBdKSxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMub3V0cHV0WzFdKSxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMub3V0cHV0WzJdKSxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMuYnV0dG9uKVxyXG4gICkuc3RhcnQoKVxyXG59XHJcbiJdfQ=="}